function t(t){return t.split("-")[1]}function n(t){return"y"===t?"height":"width"}function e(t){return t.split("-")[0]}function o(t){return["top","bottom"].includes(e(t))?"x":"y"}function r(r,i,a){let{reference:l,floating:c}=r;const s=l.x+l.width/2-c.width/2,u=l.y+l.height/2-c.height/2,f=o(i),d=n(f),y=l[d]/2-c[d]/2,m="x"===f;let p;switch(e(i)){case"top":p={x:s,y:l.y-c.height};break;case"bottom":p={x:s,y:l.y+l.height};break;case"right":p={x:l.x+l.width,y:u};break;case"left":p={x:l.x-c.width,y:u};break;default:p={x:l.x,y:l.y}}switch(t(i)){case"start":p[f]-=y*(a&&m?-1:1);break;case"end":p[f]+=y*(a&&m?-1:1)}return p}function i(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function a(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function l(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:l,rects:c,elements:s,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:y="floating",altBoundary:m=!1,padding:p=0}=n,x=i(p),g=s[m?"floating"===y?"reference":"floating":y],h=a(await l.getClippingRect({element:null==(e=await(null==l.isElement?void 0:l.isElement(g)))||e?g:g.contextElement||await(null==l.getDocumentElement?void 0:l.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:u})),w="floating"===y?{...c.floating,x:o,y:r}:c.reference,b=await(null==l.getOffsetParent?void 0:l.getOffsetParent(s.floating)),v=await(null==l.isElement?void 0:l.isElement(b))&&await(null==l.getScale?void 0:l.getScale(b))||{x:1,y:1},A=a(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:b,strategy:u}):w);return{top:(h.top-A.top+x.top)/v.y,bottom:(A.bottom-h.bottom+x.bottom)/v.y,left:(h.left-A.left+x.left)/v.x,right:(A.right-h.right+x.right)/v.x}}const c=Math.min,s=Math.max;function u(t,n,e){return s(t,c(n,e))}const f=e=>({name:"arrow",options:e,async fn(r){const{element:a,padding:l=0}=e||{},{x:c,y:s,placement:f,rects:d,platform:y}=r;if(null==a)return{};const m=i(l),p={x:c,y:s},x=o(f),g=n(x),h=await y.getDimensions(a),w="y"===x?"top":"left",b="y"===x?"bottom":"right",v=d.reference[g]+d.reference[x]-p[x]-d.floating[g],A=p[x]-d.reference[x],k=await(null==y.getOffsetParent?void 0:y.getOffsetParent(a));let R=k?"y"===x?k.clientHeight||0:k.clientWidth||0:0;0===R&&(R=d.floating[g]);const P=m[w],D=R-h[g]-m[b],F=R/2-h[g]/2+(v/2-A/2),M=u(P,F,D),S=null!=t(f)&&F!=M&&d.reference[g]/2-(F<P?m[w]:m[b])-h[g]/2<0;return{[x]:p[x]-(S?F<P?P-F:D-F:0),data:{[x]:M,centerOffset:F-M}}}}),d={left:"right",right:"left",bottom:"top",top:"bottom"};function y(t){return t.replace(/left|right|bottom|top/g,(t=>d[t]))}const m={start:"end",end:"start"};function p(t){return t.replace(/start|end/g,(t=>m[t]))}const x=function(r){return void 0===r&&(r={}),{name:"flip",options:r,async fn(i){var a;const{placement:c,middlewareData:s,rects:u,initialPlacement:f,platform:d,elements:m}=i,{mainAxis:x=!0,crossAxis:g=!0,fallbackPlacements:h,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...A}=r,k=e(c),R=e(f)===f,P=await(null==d.isRTL?void 0:d.isRTL(m.floating)),D=h||(R||!v?[y(f)]:function(t){const n=y(t);return[p(t),n,p(n)]}(f));h||"none"===b||D.push(...function(n,o,r,i){const a=t(n);let l=function(t,n,e){const o=["left","right"],r=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return e?n?r:o:n?o:r;case"left":case"right":return n?i:a;default:return[]}}(e(n),"start"===r,i);return a&&(l=l.map((t=>t+"-"+a)),o&&(l=l.concat(l.map(p)))),l}(f,v,b,P));const F=[f,...D],M=await l(i,A),S=[];let T=(null==(a=s.flip)?void 0:a.overflows)||[];if(x&&S.push(M[k]),g){const{main:e,cross:r}=function(e,r,i){void 0===i&&(i=!1);const a=t(e),l=o(e),c=n(l);let s="x"===l?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top";return r.reference[c]>r.floating[c]&&(s=y(s)),{main:s,cross:y(s)}}(c,u,P);S.push(M[e],M[r])}if(T=[...T,{placement:c,overflows:S}],!S.every((t=>t<=0))){var B;const t=((null==(B=s.flip)?void 0:B.index)||0)+1,n=F[t];if(n)return{data:{index:t,overflows:T},reset:{placement:n}};let e="bottom";switch(w){case"bestFit":{var L;const t=null==(L=T.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:L[0].placement;t&&(e=t);break}case"initialPlacement":e=f}if(c!==e)return{reset:{placement:e}}}return{}}}},g=function(n){return void 0===n&&(n=0),{name:"offset",options:n,async fn(r){const{x:i,y:a}=r,l=await async function(n,r){const{placement:i,platform:a,elements:l}=n,c=await(null==a.isRTL?void 0:a.isRTL(l.floating)),s=e(i),u=t(i),f="x"===o(i),d=["left","top"].includes(s)?-1:1,y=c&&f?-1:1,m="function"==typeof r?r(n):r;let{mainAxis:p,crossAxis:x,alignmentAxis:g}="number"==typeof m?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return u&&"number"==typeof g&&(x="end"===u?-1*g:g),f?{x:x*y,y:p*d}:{x:p*d,y:x*y}}(r,n);return{x:i+l.x,y:a+l.y,data:l}}}},h=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(n){const{x:r,y:i,placement:a}=n,{mainAxis:c=!0,crossAxis:s=!1,limiter:f={fn:t=>{let{x:n,y:e}=t;return{x:n,y:e}}},...d}=t,y={x:r,y:i},m=await l(n,d),p=o(e(a)),x="x"===p?"y":"x";let g=y[p],h=y[x];c&&(g=u(g+m["y"===p?"top":"left"],g,g-m["y"===p?"bottom":"right"])),s&&(h=u(h+m["y"===x?"top":"left"],h,h-m["y"===x?"bottom":"right"]));const w=f.fn({...n,[p]:g,[x]:h});return{...w,data:{x:w.x-r,y:w.y-i}}}}};function w(t){var n;return(null==(n=t.ownerDocument)?void 0:n.defaultView)||window}function b(t){return w(t).getComputedStyle(t)}function v(t){return D(t)?(t.nodeName||"").toLowerCase():""}let A;function k(){if(A)return A;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(A=t.brands.map((t=>t.brand+"/"+t.version)).join(" "),A):navigator.userAgent}function R(t){return t instanceof w(t).HTMLElement}function P(t){return t instanceof w(t).Element}function D(t){return t instanceof w(t).Node}function F(t){return"undefined"!=typeof ShadowRoot&&(t instanceof w(t).ShadowRoot||t instanceof ShadowRoot)}function M(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=b(t);return/auto|scroll|overlay|hidden|clip/.test(n+o+e)&&!["inline","contents"].includes(r)}function S(t){return["table","td","th"].includes(v(t))}function T(t){const n=/firefox/i.test(k()),e=b(t),o=e.backdropFilter||e.WebkitBackdropFilter;return"none"!==e.transform||"none"!==e.perspective||!!o&&"none"!==o||n&&"filter"===e.willChange||n&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const n=e.contain;return null!=n&&n.includes(t)}))}function B(){return!/^((?!chrome|android).)*safari/i.test(k())}function L(t){return["html","body","#document"].includes(v(t))}const C=Math.min,E=Math.max,O=Math.round;function N(t){const n=b(t);let e=parseFloat(n.width),o=parseFloat(n.height);const r=t.offsetWidth,i=t.offsetHeight,a=O(e)!==r||O(o)!==i;return a&&(e=r,o=i),{width:e,height:o,fallback:a}}function j(t){return P(t)?t:t.contextElement}const V={x:1,y:1};function X(t){const n=j(t);if(!R(n))return V;const e=n.getBoundingClientRect(),{width:o,height:r,fallback:i}=N(n);let a=(i?O(e.width):e.width)/o,l=(i?O(e.height):e.height)/r;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function Y(t,n,e,o){var r,i;void 0===n&&(n=!1),void 0===e&&(e=!1);const a=t.getBoundingClientRect(),l=j(t);let c=V;n&&(o?P(o)&&(c=X(o)):c=X(t));const s=l?w(l):window,u=!B()&&e;let f=(a.left+(u&&(null==(r=s.visualViewport)?void 0:r.offsetLeft)||0))/c.x,d=(a.top+(u&&(null==(i=s.visualViewport)?void 0:i.offsetTop)||0))/c.y,y=a.width/c.x,m=a.height/c.y;if(l){const t=w(l),n=o&&P(o)?w(o):o;let e=t.frameElement;for(;e&&o&&n!==t;){const t=X(e),n=e.getBoundingClientRect(),o=getComputedStyle(e);n.x+=(e.clientLeft+parseFloat(o.paddingLeft))*t.x,n.y+=(e.clientTop+parseFloat(o.paddingTop))*t.y,f*=t.x,d*=t.y,y*=t.x,m*=t.y,f+=n.x,d+=n.y,e=w(e).frameElement}}return{width:y,height:m,top:d,right:f+y,bottom:d+m,left:f,x:f,y:d}}function _(t){return((D(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return P(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function z(t){return Y(_(t)).left+q(t).scrollLeft}function G(t,n,e){const o=R(n),r=_(n),i=Y(t,!0,"fixed"===e,n);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&"fixed"!==e)if(("body"!==v(n)||M(r))&&(a=q(n)),R(n)){const t=Y(n,!0);l.x=t.x+n.clientLeft,l.y=t.y+n.clientTop}else r&&(l.x=z(r));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function H(t){if("html"===v(t))return t;const n=t.assignedSlot||t.parentNode||(F(t)?t.host:null)||_(t);return F(n)?n.host:n}function I(t){return R(t)&&"fixed"!==b(t).position?t.offsetParent:null}function J(t){const n=w(t);let e=I(t);for(;e&&S(e)&&"static"===b(e).position;)e=I(e);return e&&("html"===v(e)||"body"===v(e)&&"static"===b(e).position&&!T(e))?n:e||function(t){let n=H(t);for(;R(n)&&!L(n);){if(T(n))return n;n=H(n)}return null}(t)||n}function K(t){const n=H(t);return L(n)?t.ownerDocument.body:R(n)&&M(n)?n:K(n)}function Q(t,n){var e;void 0===n&&(n=[]);const o=K(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=w(o);return r?n.concat(i,i.visualViewport||[],M(o)?o:[]):n.concat(o,Q(o))}function U(t,n,e){return"viewport"===n?a(function(t,n){const e=w(t),o=_(t),r=e.visualViewport;let i=o.clientWidth,a=o.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const t=B();(t||!t&&"fixed"===n)&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}(t,e)):P(n)?function(t,n){const e=Y(t,!0,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft,i=R(t)?X(t):{x:1,y:1},a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=r*i.x,s=o*i.y;return{top:s,left:c,right:c+a,bottom:s+l,x:c,y:s,width:a,height:l}}(n,e):a(function(t){var n;const e=_(t),o=q(t),r=null==(n=t.ownerDocument)?void 0:n.body,i=E(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=E(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let l=-o.scrollLeft+z(t);const c=-o.scrollTop;return"rtl"===b(r||e).direction&&(l+=E(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}(_(t)))}const W={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t,n){const e=n.get(t);if(e)return e;let o=Q(t).filter((t=>P(t)&&"body"!==v(t))),r=null;const i="fixed"===b(t).position;let a=i?H(t):t;for(;P(a)&&!L(a);){const t=b(a),n=T(a);(i?n||r:n||"static"!==t.position||!r||!["absolute","fixed"].includes(r.position))?r=t:o=o.filter((t=>t!==a)),a=H(a)}return n.set(t,o),o}(n,this._c):[].concat(e),o],a=i.reduce(((t,e)=>{const o=U(n,e,r);return t.top=E(o.top,t.top),t.right=C(o.right,t.right),t.bottom=C(o.bottom,t.bottom),t.left=E(o.left,t.left),t}),U(n,i[0],r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=R(e),i=_(e);if(e===i)return n;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==v(e)||M(i))&&(a=q(e)),R(e))){const t=Y(e);l=X(e),c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+c.x,y:n.y*l.y-a.scrollTop*l.y+c.y}},isElement:P,getDimensions:function(t){return N(t)},getOffsetParent:J,getDocumentElement:_,getScale:X,async getElementRects(t){let{reference:n,floating:e,strategy:o}=t;const r=this.getOffsetParent||J,i=this.getDimensions;return{reference:G(n,await r(e),o),floating:{x:0,y:0,...await i(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===b(t).direction},Z=(t,n,e)=>{const o=new Map,i={platform:W,...e},a={...i.platform,_c:o};return(async(t,n,e)=>{const{placement:o="bottom",strategy:i="absolute",middleware:a=[],platform:l}=e,c=a.filter(Boolean),s=await(null==l.isRTL?void 0:l.isRTL(n));let u=await l.getElementRects({reference:t,floating:n,strategy:i}),{x:f,y:d}=r(u,o,s),y=o,m={},p=0;for(let e=0;e<c.length;e++){const{name:a,fn:x}=c[e],{x:g,y:h,data:w,reset:b}=await x({x:f,y:d,initialPlacement:o,placement:y,strategy:i,middlewareData:m,rects:u,platform:l,elements:{reference:t,floating:n}});f=null!=g?g:f,d=null!=h?h:d,m={...m,[a]:{...m[a],...w}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(y=b.placement),b.rects&&(u=!0===b.rects?await l.getElementRects({reference:t,floating:n,strategy:i}):b.rects),({x:f,y:d}=r(u,y,s))),e=-1)}return{x:f,y:d,placement:y,strategy:i,middlewareData:m}})(t,n,{...i,platform:a})};export{f as a,Z as c,x as f,g as o,h as s}